<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Язык R в интернет маркетинге" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Методичесткое пособие к авторскому курсу Алексея Селезнёва “Язык R в интернет маркетинге.”" />
<meta name="github-repo" content="rstudio/bookdown-demo" />

<meta name="author" content="Алексей Селезнёв" />

<meta name="date" content="2018-10-03" />


<meta name="description" content="Методичесткое пособие к авторскому курсу Алексея Селезнёва “Язык R в интернет маркетинге.”">

<title>Язык R в интернет маркетинге</title>

<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#section-1"><span class="toc-section-number">1</span> Описание</a></li>
<li class="has-sub"><a href="2-a-.html#a----"><span class="toc-section-number">2</span> a - О курсе</a><ul>
<li><a href="2-1-.html#---"><span class="toc-section-number">2.1</span> Для кого этот курс</a></li>
<li><a href="2-2-.html#-----"><span class="toc-section-number">2.2</span> Какие знания требуются для прохождения курса</a></li>
<li><a href="2-3-.html#-------"><span class="toc-section-number">2.3</span> Какие темы не будут затронуты в ходе курса</a></li>
<li><a href="2-4-.html#------"><span class="toc-section-number">2.4</span> Что вы будете уметь поосле проождения курса</a></li>
<li><a href="2-5-.html#-"><span class="toc-section-number">2.5</span> Поддержка студентов</a></li>
<li><a href="2-5-.html#-"><span class="toc-section-number">2.6</span> Конспект курса</a></li>
<li><a href="2-5-.html#-"><span class="toc-section-number">2.7</span> Программа курса</a></li>
</ul></li>
<li><a href="3-b-.html#b----"><span class="toc-section-number">3</span> b - Об авторе</a></li>
<li><a href="4-c-.html#c---"><span class="toc-section-number">4</span> c - Благодарности</a></li>
<li class="has-sub"><a href="5-1-r-.html#-1---r."><span class="toc-section-number">5</span> Модуль 1: Введение в R.</a><ul>
<li><a href="5-1-r.html#---r"><span class="toc-section-number">5.1</span> История создания языка R</a></li>
<li><a href="5-2-r-.html#--r."><span class="toc-section-number">5.2</span> Преимущества языка R.</a></li>
<li class="has-sub"><a href="5-3-r-rstudio.html#--r----rstudio"><span class="toc-section-number">5.3</span> Установка языка R и среды разработки RStudio</a><ul>
<li><a href="5-3-r-rstudio.html#---r--rstudio"><span class="toc-section-number">5.3.1</span> Ссылки для загрузки R и RStudio</a></li>
</ul></li>
<li class="has-sub"><a href="5-4-power-bi-r-.html#------power-bi---r-."><span class="toc-section-number">5.4</span> Загрузка, преобразование и визуализация данных в Power BI с помощью R скриптов.</a><ul>
<li><a href="5-4-power-bi-r-.html#---power-bi."><span class="toc-section-number">5.4.1</span> Загрузка данных в Power BI.</a></li>
<li><a href="5-4-power-bi-r-.html#---power-bi-power-query."><span class="toc-section-number">5.4.2</span> Преобразование данных в Power BI (power query).</a></li>
<li><a href="5-4-power-bi-r-.html#---power-bi------r."><span class="toc-section-number">5.4.3</span> Визуализация данных в Power BI с помощью визуального элемента скрипта R.</a></li>
<li><a href="5-4-power-bi-r-.html#---power-bi--r-."><span class="toc-section-number">5.4.4</span> Использование пользовательских параметров Power BI в R скриптах.</a></li>
</ul></li>
<li><a href="5-5-rstudio.html#--rstudio"><span class="toc-section-number">5.5</span> Среда разработки RStudio</a></li>
<li class="has-sub"><a href="5-6-r.html#----r"><span class="toc-section-number">5.6</span> Классы объектов в языке R</a><ul>
<li><a href="5-6-r.html#section-5.6.1"><span class="toc-section-number">5.6.1</span> Векторы</a></li>
<li><a href="5-6-r.html#-data.frame"><span class="toc-section-number">5.6.2</span> Таблицы (data.frame)</a></li>
<li><a href="5-6-r.html#-list"><span class="toc-section-number">5.6.3</span> Списки (list)</a></li>
<li><a href="5-6-r.html#--"><span class="toc-section-number">5.6.4</span> Проверить класс объекта</a></li>
</ul></li>
<li class="has-sub"><a href="5-7-r.html#-----r"><span class="toc-section-number">5.7</span> Работа со строками на языке R</a><ul>
<li><a href="5-7-r.html#-------r"><span class="toc-section-number">5.7.1</span> Базовые возможности для работы со строками в R</a></li>
<li><a href="5-7-r.html#------stringr"><span class="toc-section-number">5.7.2</span> Работа со строками с помощью пакета stringr</a></li>
</ul></li>
<li class="has-sub"><a href="5-8-csv-excel-json-r.html#---csv-excel--json---r"><span class="toc-section-number">5.8</span> Загрузка данных из csv, excel и json файлов в R</a><ul>
<li><a href="5-8-csv-excel-json-r.html#---csv-"><span class="toc-section-number">5.8.1</span> Загрузка данных из csv файлов</a></li>
<li><a href="5-8-csv-excel-json-r.html#---excel-"><span class="toc-section-number">5.8.2</span> Загрузка данных из Excel файлов</a></li>
<li><a href="5-8-csv-excel-json-r.html#---json-"><span class="toc-section-number">5.8.3</span> Загрузка данных из JSON файлов</a></li>
</ul></li>
<li><a href="5-9-r.html#------r"><span class="toc-section-number">5.9</span> Агрегирующие функции и арифметические операции в R</a></li>
<li class="has-sub"><a href="5-10-.html#-----."><span class="toc-section-number">5.10</span> Манипуляция с данными, (группировка и агреция).</a><ul>
<li><a href="5-10-.html#-dplyr"><span class="toc-section-number">5.10.1</span> Пакет dplyr</a></li>
<li><a href="5-10-.html#-data.table"><span class="toc-section-number">5.10.2</span> Пакет data.table</a></li>
<li><a href="5-10-.html#-sqldf"><span class="toc-section-number">5.10.3</span> Пакет sqldf</a></li>
<li><a href="5-10-.html#-tidyr"><span class="toc-section-number">5.10.4</span> Пакет tidyr</a></li>
</ul></li>
<li class="has-sub"><a href="5-11-r-lubridate-.html#------r--lubridate."><span class="toc-section-number">5.11</span> Работа с датами и временем в R, пакет lubridate.</a><ul>
<li><a href="5-11-r-lubridate-.html#---------r"><span class="toc-section-number">5.11.1</span> Базовые возможности по работе с датой и временем в R</a></li>
<li><a href="5-11-r-lubridate-.html#-lubridate"><span class="toc-section-number">5.11.2</span> Пакет lubridate</a></li>
</ul></li>
<li><a href="5-12-if-ifelse-switch-r.html#--if-ifelse-switch--r"><span class="toc-section-number">5.12</span> Условные конструкции if, ifelse, switch в R</a></li>
<li class="has-sub"><a href="5-13-for-while.html#-for--while"><span class="toc-section-number">5.13</span> Циклы for и while</a><ul>
<li><a href="5-13-for-while.html#-for"><span class="toc-section-number">5.13.1</span> Цикл for</a></li>
<li><a href="5-13-for-while.html#-while"><span class="toc-section-number">5.13.2</span> Цикл while</a></li>
</ul></li>
<li><a href="5-7-r.html#-----r"><span class="toc-section-number">5.14</span> Разработка собственных функций в языке R</a></li>
<li><a href="5-15-r-try.html#---r--try"><span class="toc-section-number">5.15</span> Обработка ошибок в R, функция try</a></li>
<li><a href="2-1-.html#---"><span class="toc-section-number">5.16</span> Рекомендации по оформлению кода</a></li>
</ul></li>
<li class="has-sub"><a href="6-2-api-.html#-2---api--."><span class="toc-section-number">6</span> Модуль 2: Работа с API рекламных площадок.</a><ul>
<li class="has-sub"><a href="6-1-api.html#--api"><span class="toc-section-number">6.1</span> Что такое API</a><ul>
<li><a href="6-1-api.html#-http-"><span class="toc-section-number">6.1.1</span> Типы HTTP запросов</a></li>
</ul></li>
<li class="has-sub"><a href="6-2-api-google-ads.html#--api-google-ads"><span class="toc-section-number">6.2</span> Работа с API Google Ads</a><ul>
<li><a href="6-2-api-google-ads.html#----api-google-ads"><span class="toc-section-number">6.2.1</span> Как получить доступ к API Google Ads</a></li>
<li><a href="6-2-api-google-ads.html#--api-google-ads"><span class="toc-section-number">6.2.2</span> Как устроен API Google Ads</a></li>
<li><a href="6-2-api-google-ads.html#-radwords"><span class="toc-section-number">6.2.3</span> Пакет RAdwords</a></li>
</ul></li>
<li class="has-sub"><a href="6-3-api-.html#--api--"><span class="toc-section-number">6.3</span> Работа с API Яндекс Директ</a><ul>
<li><a href="6-3-api-.html#-ryandexdirect"><span class="toc-section-number">6.3.1</span> Пакет ryandexdirect</a></li>
</ul></li>
<li class="has-sub"><a href="6-4-api-facebook.html#--api-facebook"><span class="toc-section-number">6.4</span> Работа с API Facebook</a><ul>
<li><a href="6-4-api-facebook.html#---facebook"><span class="toc-section-number">6.4.1</span> Создание приложения в Facebook</a></li>
<li><a href="6-4-api-facebook.html#--api-facebook"><span class="toc-section-number">6.4.2</span> Авторизация в API Facebook</a></li>
<li><a href="6-4-api-facebook.html#-----facebook"><span class="toc-section-number">6.4.3</span> Загрузка объектов из рекламного кабинета Facebook</a></li>
</ul></li>
<li class="has-sub"><a href="6-5-api-vk-com.html#--api--vk.com"><span class="toc-section-number">6.5</span> Работа с API Вконтакте (vk.com)</a><ul>
<li><a href="6-5-api-vk-com.html#-----api-"><span class="toc-section-number">6.5.1</span> Создание приложения для работы с API Вконтакте</a></li>
<li><a href="6-5-api-vk-com.html#--api-"><span class="toc-section-number">6.5.2</span> Авторизация в API Вконтакте</a></li>
<li><a href="6-5-api-vk-com.html#--rvkstat"><span class="toc-section-number">6.5.3</span> Функции пакета rvkstat</a></li>
<li><a href="2-2-.html#-----"><span class="toc-section-number">6.5.4</span> Загрузка объектов из рекламного кабинета Вконтакте</a></li>
<li><a href="2-2-.html#-----"><span class="toc-section-number">6.5.5</span> Загрузка статистики из рекламного кабинета Вконтакте</a></li>
<li><a href="2-4-.html#------"><span class="toc-section-number">6.5.6</span> Загрузка статистики по сообществам и группам Вконтакте</a></li>
</ul></li>
<li class="has-sub"><a href="6-6-api-mytarget.html#--api-mytarget"><span class="toc-section-number">6.6</span> Работа с API MyTarget</a><ul>
<li><a href="6-6-api-mytarget.html#--api-mytarget"><span class="toc-section-number">6.6.1</span> Авторизация в API MyTarget</a></li>
</ul></li>
<li class="has-sub"><a href="6-7-google-analytics.html#---google-analytics"><span class="toc-section-number">6.7</span> Загрузка данных из Google Analytics</a><ul>
<li><a href="6-7-google-analytics.html#-api----google-analytics"><span class="toc-section-number">6.7.1</span> Какие API интерфейсы доступны в Google Analytics</a></li>
<li><a href="6-7-google-analytics.html#--api-google-analytics"><span class="toc-section-number">6.7.2</span> Авторизация в API Google Analytics</a></li>
<li><a href="6-7-google-analytics.html#--management-api"><span class="toc-section-number">6.7.3</span> Работа с Management API</a></li>
<li><a href="6-7-google-analytics.html#--core-reporting-api"><span class="toc-section-number">6.7.4</span> Работа с Core Reporting API</a></li>
<li><a href="6-7-google-analytics.html#--multi-channel-funnels-api"><span class="toc-section-number">6.7.5</span> Работа с Multi-Channel Funnels API</a></li>
<li><a href="6-7-google-analytics.html#--real-time-reporting-api"><span class="toc-section-number">6.7.6</span> Работа с Real time reporting API</a></li>
</ul></li>
<li class="has-sub"><a href="6-3-api-.html#---api--"><span class="toc-section-number">6.8</span> Загрузка данных из API Яндекс Метрики</a><ul>
<li><a href="6-3-api-.html#----api--"><span class="toc-section-number">6.8.1</span> Авторизация для работы с API Яндекс Метрики</a></li>
<li><a href="6-8-api-.html#----api---"><span class="toc-section-number">6.8.2</span> Функции для работы с API управления Яндекс Метрики</a></li>
<li><a href="6-8-api-.html#---api---"><span class="toc-section-number">6.8.3</span> Загрузка данных из API отчётов Яндекс Метрики</a></li>
<li><a href="6-8-api-.html#---logs-api--"><span class="toc-section-number">6.8.4</span> Загрузка данных из Logs API Яндекс Метрики</a></li>
<li><a href="6-8-api-.html#---api-----core-reporting-api-google-analytics"><span class="toc-section-number">6.8.5</span> Загрузка данных из API Яндекс Метрики совместимого с Core Reporting API Google Analytics</a></li>
</ul></li>
<li class="has-sub"><a href="6-9-google-search-console.html#--google-search-console"><span class="toc-section-number">6.9</span> Работа с Google Search Console</a><ul>
<li><a href="6-9-google-search-console.html#----5000---1-"><span class="toc-section-number">6.9.1</span> Как обойти ограничение в 5000 строк на 1 запрос</a></li>
</ul></li>
<li class="has-sub"><a href="6-10-google-trends.html#--google-trends"><span class="toc-section-number">6.10</span> Работа с Google Trends</a><ul>
<li><a href="6-10-google-trends.html#-----google-trends"><span class="toc-section-number">6.10.1</span> Манипуляция с данными полученными из Google Trends</a></li>
</ul></li>
<li class="has-sub"><a href="5-6-r.html#--"><span class="toc-section-number">6.11</span> Парсинг веб сайтов</a><ul>
<li><a href="5-6-r.html#----"><span class="toc-section-number">6.11.1</span> Поиск элементов на веб странице</a></li>
<li><a href="6-11-.html#-----html-"><span class="toc-section-number">6.11.2</span> Извлечение значений из полученныз элементов HTML страницы</a></li>
<li><a href="2-1-.html#---"><span class="toc-section-number">6.11.3</span> Имитация пользовательской веб сессии</a></li>
</ul></li>
<li><a href="6-1-api.html#-http-"><span class="toc-section-number">6.12</span> отправка HTTP запросов</a></li>
</ul></li>
<li class="has-sub"><a href="7-3-api-.html#-3-----api----."><span class="toc-section-number">7</span> Модуль 3: Работа с загруженными из API интерфейсов различных сервисов данными.</a><ul>
<li><a href="7-1-google-.html#-----google-"><span class="toc-section-number">7.1</span> Отправка и стение данных из Google Таблиц</a></li>
<li class="has-sub"><a href="7-2-ggplot2.html#-----ggplot2"><span class="toc-section-number">7.2</span> Визуализация данных с помощью пакета ggplot2</a><ul>
<li><a href="7-2-ggplot2.html#---qplot"><span class="toc-section-number">7.2.1</span> Быстрый график, функция <code>qplot</code></a></li>
<li><a href="2-1-.html#---"><span class="toc-section-number">7.2.2</span> Построение графиков наложением слоёв</a></li>
</ul></li>
<li class="has-sub"><a href="7-3-dbi-.html#----dbi-------"><span class="toc-section-number">7.3</span> Работа с базами данных, DBI - Интерфейс взаимодействия с базами данных</a><ul>
<li><a href="7-3-dbi-.html#---mysql"><span class="toc-section-number">7.3.1</span> Работа с СУБД MySQL</a></li>
<li><a href="7-3-dbi-.html#----postgresql"><span class="toc-section-number">7.3.2</span> Работа с базой данных PostgreSQL</a></li>
<li><a href="7-3-dbi-.html#----sqlite"><span class="toc-section-number">7.3.3</span> Работа с базой данных SQLite</a></li>
<li><a href="7-3-dbi-.html#-----google-bigquery"><span class="toc-section-number">7.3.4</span> Работа с облачной базой данных Google BigQuery</a></li>
</ul></li>
<li><a href="5-6-r.html#----r"><span class="toc-section-number">7.4</span> Отправка почты с помощью R</a></li>
<li class="has-sub"><a href="7-5-r-.html#---r---"><span class="toc-section-number">7.5</span> Как настроить запуск R скриптов по рассписанию</a><ul>
<li><a href="2-1-.html#---"><span class="toc-section-number">7.5.1</span> Настройка расписание через плагин</a></li>
<li><a href="7-5-r-.html#------taskscheduler"><span class="toc-section-number">7.5.2</span> Настройка расписание с помощью функций пакета taskscheduleR</a></li>
<li><a href="7-5-r-.html#------windows"><span class="toc-section-number">7.5.3</span> Ручная настройка рассписания через планировщик задач Windows</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="8-r-r-sources.html#-----r-r-sources"><span class="toc-section-number">8</span> Полезные, русскоязычные ресурсы по языку R (r sources)</a><ul>
<li><a href="2-1-.html#---"><span class="toc-section-number">8.1</span> Группы в социальных сетях</a></li>
<li><a href="2-1-.html#---"><span class="toc-section-number">8.2</span> Телеграмм каналы и чаты</a></li>
<li><a href="8-3-section-8-3.html#section-8.3"><span class="toc-section-number">8.3</span> Блоги</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="----r" class="section level2">
<h2><span class="header-section-number">5.6</span> Классы объектов в языке R</h2>
<p>В языке R существует достаточно много классов объектов, но как правило используется 3: Вектор, Дата фрейм и Список.</p>
<div id="section-5.6.1" class="section level3">
<h3><span class="header-section-number">5.6.1</span> Векторы</h3>
<p>Вектор это объект содержащий набор элементов одного типа, вы не можете хранить в одном векторе элементы имеющие разный тип данных, например число и текст.</p>
<div id="-" class="section level4">
<h4><span class="header-section-number">5.6.1.1</span> Создание вектора</h4>
<p>В R есть довольно много способов создания векторов, но наиболее простым и используемым является использование функции <code>c</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># создание тектового вектора</span>
names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Алексей&quot;</span>, <span class="st">&quot;Денис&quot;</span>, <span class="st">&quot;Николай&quot;</span>, <span class="st">&quot;Виктор&quot;</span>, <span class="st">&quot;Денис&quot;</span>) 
country &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;RU&quot;</span>, <span class="st">&quot;UA&quot;</span>, <span class="st">&quot;KZ&quot;</span>, <span class="st">&quot;BY&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;BR&quot;</span>, <span class="st">&quot;TR&quot;</span>, <span class="st">&quot;US&quot;</span>, <span class="st">&quot;CA&quot;</span>)

age &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">34</span>, <span class="dv">25</span>, <span class="dv">39</span>, <span class="dv">30</span>, <span class="dv">28</span>)                        <span class="co"># создание числового вектора</span>
nums &lt;-<span class="st"> </span><span class="dv">5</span><span class="op">:</span><span class="dv">20</span>                                        <span class="co"># создание вектора из простой последовательсти чисел</span>
nums &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">5</span>, <span class="dt">to =</span> <span class="dv">20</span>)                      
nums_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">5</span>, <span class="dt">to =</span> <span class="dv">20</span>, <span class="dt">by =</span> <span class="dv">2</span>)            <span class="co"># создание вектора из последовательности чисел с определённым шагом</span>
nums_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">5</span>, <span class="dt">to =</span> <span class="dv">20</span>, <span class="dt">length.out =</span> <span class="dv">9</span>)    <span class="co"># создание последновательсти чисел определённой длинны</span>

<span class="co"># создание вектора с именоваными элементами</span>
name_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">name =</span> <span class="st">&quot;Алексей&quot;</span>, <span class="dt">age =</span> <span class="dv">34</span>, <span class="dt">company =</span> <span class="st">&quot;Netpeak&quot;</span>)</code></pre></div>
</div>
<div id="---" class="section level4">
<h4><span class="header-section-number">5.6.1.2</span> Обращение к элементам вектора</h4>
<p>ПОлучить один или несколько конкретных элементов вектора можно несколькими способами, по индексу, явно указав какие элементы вам нужны с помозью TRUE / FALSE, задав логическое выражение для фильтрации элементов вектора либо по именам в случае если вектор имеет иненованые элементы.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">names[<span class="dv">2</span>]                           <span class="co"># значение по его индексу</span>
names[<span class="op">-</span><span class="dv">4</span>]                          <span class="co"># исключить значения по индексу</span>
names[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]                      <span class="co"># нескоько значений по индексам</span>
names[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]  <span class="co"># с помощью логического TRUE / FALSE</span>
name_vector[<span class="st">&quot;company&quot;</span>]             <span class="co"># зачение по его имени</span>
age[ age <span class="op">&gt;</span><span class="st"> </span><span class="dv">31</span> ]                    <span class="co"># через логическое выражение</span>
<span class="kw">which</span>(age <span class="op">&gt;</span><span class="st"> </span><span class="dv">31</span>)                    <span class="co"># получить индексы элементов по логическому выражению</span></code></pre></div>
</div>
<div id="-" class="section level4">
<h4><span class="header-section-number">5.6.1.3</span> Свойства вектора</h4>
<p>С помощью ряда функций вы можете получить свойства вектора, например такие как длинна, тип данных или имена элементов.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(nums_<span class="dv">3</span>)       <span class="co"># получить тип данных</span>
<span class="kw">class</span>(age)

<span class="kw">length</span>(names)       <span class="co"># получить количество элементов</span>
<span class="kw">names</span>(name_vector)  <span class="co"># получить имена элементов</span></code></pre></div>
</div>
<div id="---" class="section level4">
<h4><span class="header-section-number">5.6.1.4</span> Манипуляция с элементами вектора</h4>
<p>С элементами вектора можно проводить люые манипуляции, сортировать, делать случайные выборки элементов и объенять несколько векторов в один.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(country)                      <span class="co"># сортировка элементов вектора по возрастанию</span>
<span class="kw">sort</span>(country, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)   <span class="co"># сортировка элементов вектора по убыванию</span>
<span class="kw">unique</span>(names)                      <span class="co"># получить список уникальных элементов вектора</span>

<span class="kw">sample</span>(<span class="dt">x       =</span> country,          <span class="co"># выборка случайных элементов из вектора</span>
       <span class="dt">size    =</span> <span class="dv">8</span>, 
       <span class="dt">replace =</span> F)                <span class="co"># replace управляет возможность повтора элементов</span>

<span class="kw">c</span>(age, nums)                       <span class="co"># объеденение двух векторов </span></code></pre></div>
<p>Функция <em>sample</em> позволяет получить набор случайных элементов из вектора, аргумент <em>size</em> отвечает за количество элементов которые вернёт функция, аргумент <em>replace</em> позволяет запретить отбирать один и тот же элемент вектора несколько раз.</p>
</div>
<div id="----" class="section level4">
<h4><span class="header-section-number">5.6.1.5</span> Логические операция с элементами векторов</h4>
<p>Все операции сравнения над векторами зациклены, т.е. даже если вы будете сравнивать между собой элементы двух векторов разной длинны то в ходе сравнения элементов более длинного вектора начнут сравниваться с начальными элементами короткого вектора.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">1</span>, <span class="dv">9</span>)
vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">10</span>)

vec1 <span class="op">&gt;</span><span class="st"> </span>vec2

vec1 <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="op">&amp;</span><span class="st"> </span>vec1 <span class="op">&lt;</span><span class="st"> </span><span class="dv">9</span> <span class="co"># пример логического и</span>
vec1 <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span> <span class="op">|</span><span class="st"> </span>vec1 <span class="op">&gt;</span><span class="st"> </span><span class="dv">8</span> <span class="co"># пример логического или</span></code></pre></div>
<p>Для более сложных операций сравнения в которы необходимо использовать логические операторы <em>И</em> и <em>ИЛИ</em> следует использовать одиночные знаки. <strong>&amp;</strong> - И <strong>|</strong> - ИЛИ</p>
</div>
</div>
<div id="-data.frame" class="section level3">
<h3><span class="header-section-number">5.6.2</span> Таблицы (data.frame)</h3>
<p>Объекты касса data.frame являются привычными для вас двухмерными таблицами, по сути таблица это набор векторов одинаковой длинны, каждое поле таблицы может содержать данные только одного типа, так же как и вектора.</p>
<div id="-" class="section level4">
<h4><span class="header-section-number">5.6.2.1</span> Создание таблицы</h4>
<p>Создавать таблицы можно с помощью функции data.frame, каждое поле таблицы является вектором и может содержать данные одного типа, все векторы из которых состоят поля таблицы должны быть одинаковой длинны.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Пример создание таблицы пользователей</span>
users &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Names      =</span> names,
                    <span class="dt">Age        =</span> age,
                    <span class="dt">Country_id =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(country),
                                        <span class="dt">size =</span> <span class="kw">length</span>(names), 
                                        <span class="dt">replace =</span> T),
                    <span class="dt">Id         =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(names))

<span class="co"># Создаём таблицу - справочник стран</span>
country_dicy &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id           =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(country),
                           <span class="dt">country_name =</span> <span class="kw">sort</span>(country))</code></pre></div>
<p>В приведённом примере мы создали две таблицы:</p>
<ul>
<li>users - таблица состоит из 4 полей (Names, Age, Country_id, Id).</li>
<li>country_dicy - таблица состоит из двух полей (id, country_name).</li>
</ul>
</div>
<div id="---" class="section level4">
<h4><span class="header-section-number">5.6.2.2</span> Обращение к элементам таблицы</h4>
<p>Образаться к любым элементам таблицы, строкам или столбцам, можно либо по индексу либо по имени, для получения какого либо элемента необходимо написать название таблицы, открыть квадратные скобки и указать сначала строки и после запятой столбцы которые вам необходимо получить.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">users[<span class="dv">3</span>, ]                    <span class="co"># получить 3 строку</span>
users[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ]                  <span class="co"># получить 2-4 строку по номеру</span>
users[, <span class="dv">2</span>]                    <span class="co"># получить 2 столбец</span>
users[[<span class="st">&quot;Age&quot;</span>]]                <span class="co"># получить столбец по имени</span>
users<span class="op">$</span>Age                     <span class="co"># получить столбец по имени</span>
users[, <span class="kw">c</span>(<span class="st">&quot;Names&quot;</span>, <span class="st">&quot;Id&quot;</span>)]     <span class="co"># получить несколько столбцов по имени</span>
users[, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]              <span class="co"># получить несколько столбцов по номерам</span>

users[ users<span class="op">$</span>Age <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, ]      <span class="co"># получить строки по логическому выражению</span>
users<span class="op">$</span>Names[ users<span class="op">$</span>Age <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> ] <span class="co"># получить значения одного поля, по лог выражению другого поля</span>

<span class="kw">head</span>(users, <span class="dt">n =</span> <span class="dv">3</span>)            <span class="co"># получить верхние 3 строки таблицы</span>
<span class="kw">tail</span>(users, <span class="dt">n =</span> <span class="dv">3</span>)            <span class="co"># получить нижние три строки таблицы</span></code></pre></div>
</div>
<div id="-----" class="section level4">
<h4><span class="header-section-number">5.6.2.3</span> Просмотрт структуры и описательных статистик таблиц</h4>
<p>Просмотр структуры таблицы, т.е. информации о том какие поля есть в таблице, и данные какого типа в каком поле храняться можно с помощью функции str.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(users) <span class="co"># структура таблицы</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ Names     : Factor w/ 4 levels &quot;Алексей&quot;,&quot;Виктор&quot;,..: 1 3 4 2 3
##  $ Age       : num  34 25 39 30 28
##  $ Country_id: int  7 5 5 6 7
##  $ Id        : int  1 2 3 4 5</code></pre>
<p>Получить описательные стаистики количественнх переменных и информацию о качественных переменных можно с помощью команды summary.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(users)    <span class="co"># описательные таблицы</span></code></pre></div>
<pre><code>##      Names        Age         Country_id       Id   
##  Алексей:1   Min.   :25.0   Min.   :5    Min.   :1  
##  Виктор :1   1st Qu.:28.0   1st Qu.:5    1st Qu.:2  
##  Денис  :2   Median :30.0   Median :6    Median :3  
##  Николай:1   Mean   :31.2   Mean   :6    Mean   :3  
##              3rd Qu.:34.0   3rd Qu.:7    3rd Qu.:4  
##              Max.   :39.0   Max.   :7    Max.   :5</code></pre>
</div>
<div id="-" class="section level4">
<h4><span class="header-section-number">5.6.2.4</span> Сортировка таблц</h4>
<p>Сортировка таблиц осуществляется с помощью функции order.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Сортировка таблиц</span>
users[ <span class="kw">order</span>( users<span class="op">$</span>Age, <span class="dt">decreasing =</span> T), ]</code></pre></div>
</div>
<div id="--" class="section level4">
<h4><span class="header-section-number">5.6.2.5</span> Создание поднаборов таблиц</h4>
<p>Для создания поднабора данных в R существует функция subset, в которой вы может задать условия фильтрации по различным полям таблицы объединив несклько условий логическими <em>И</em> или <em>ИЛИ</em>, при этом <strong>следует использовать одиночные логические операторы (&amp;, |)</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Выбираем поднабор состоящий из пользователей от 30 лет и старше</span>
users_after_<span class="dv">30</span> &lt;-<span class="st"> </span><span class="kw">subset</span>(<span class="dt">x =</span> users, Age <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>, <span class="dt">select =</span> <span class="kw">c</span>(Id, Names))
<span class="co"># Выбираем пользователейв имени которых присутвует буква &quot;к&quot; и количество букв в имени более 5</span>
users_i        &lt;-<span class="st"> </span><span class="kw">subset</span>(<span class="dt">x =</span> users, 
                         <span class="kw">grepl</span>(<span class="dt">x =</span> users<span class="op">$</span>Names, <span class="dt">pattern =</span> <span class="st">&quot;к&quot;</span>) <span class="op">&amp;</span><span class="st"> </span><span class="kw">nchar</span>(<span class="kw">as.character</span>(users<span class="op">$</span>Names)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>, 
                         <span class="dt">select =</span> <span class="kw">c</span>(Id, Names))</code></pre></div>
</div>
<div id="-" class="section level4">
<h4><span class="header-section-number">5.6.2.6</span> Объединение таблиц</h4>
<p>Для объединения таблиц служат следующие 3 функции: + <strong>rbind</strong> - Соединение таблиц по строкам + <strong>cbind</strong> - Соединение таблиц по столцам + <strong>merge</strong> - Соединение таблиц по ключу</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">users_two      &lt;-<span class="st"> </span><span class="kw">rbind</span>(users_after_<span class="dv">30</span>, users_i) <span class="co"># объединения таблиц по строкам</span>
users_three    &lt;-<span class="st"> </span><span class="kw">cbind</span>(users_after_<span class="dv">30</span> ,users_i) <span class="co"># объединение таблиц по столбцам</span>

<span class="co"># Объединение таблиц по ключу</span>
<span class="co"># Соединяем таблицу пользователей со справочником по id страны</span>
user_resul &lt;-<span class="st"> </span><span class="kw">merge</span>(<span class="dt">x =</span> users,           <span class="co"># левая таблица </span>
                    <span class="dt">y =</span> country_dicy,    <span class="co"># правая таблица</span>
                    <span class="dt">by.x =</span> <span class="st">&quot;Country_id&quot;</span>, <span class="co"># имя поля ключа в левой таблице</span>
                    <span class="dt">by.y =</span> <span class="st">&quot;id&quot;</span>,         <span class="co"># имя поля ключа в правой таблице</span>
                    <span class="dt">all.x =</span> <span class="ot">TRUE</span>)        <span class="co"># тип соединения, в данном случае левое соединение   </span></code></pre></div>
<p>Функция merge предназначена для соединения таблиц по ключам и принимает следующие аргументы: + <strong>x</strong> - левая таблица + <strong>y</strong> - правая таблица + <strong>by.x</strong> - ключи, название ключевых полей в левой таблице, если ключевых полей несколько их необзодимо передать в виде тектового вектора объединив их названия с помощью функции <code>c</code>. + <strong>by.y</strong> - ключи, название ключевых полей в правой таблице, если ключевых полей несколько их необзодимо передать в виде тектового вектора объединив их названия с помощью функции <code>c</code>. + <strong>all.x</strong> или <strong>all.y</strong> - аргументы которые управляют направлением соединения, allx = TRUE означает оставить все строки левой таблицы, т.е. левое соединение.</p>
</div>
</div>
<div id="-list" class="section level3">
<h3><span class="header-section-number">5.6.3</span> Списки (list)</h3>
<p>Объекты класса list могут являтся контейнерами для храннения других объектов, в том числе и других списков, как правило объекты класса list испоьзуются для хранения данныхимеющих сложную вложенную структуру, к примеру в виде списков удобно хранить данные прочитанные из JSON формата.</p>
<div id="-" class="section level4">
<h4><span class="header-section-number">5.6.3.1</span> Создание списков</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">user =</span> <span class="kw">list</span>(<span class="dt">id =</span> <span class="dv">1</span>,
                            <span class="dt">name =</span> <span class="st">&quot;Alex&quot;</span>,
                            <span class="dt">data =</span> users[ users<span class="op">$</span>Id <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ] ))

my_list_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">list</span>(users, age, names, name_vector)</code></pre></div>
</div>
<div id="---" class="section level4">
<h4><span class="header-section-number">5.6.3.2</span> Обращение к элементам списка</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_list<span class="op">$</span>user<span class="op">$</span>data<span class="op">$</span>Names

my_list_<span class="dv">2</span>[[<span class="dv">4</span>]]
my_list_<span class="dv">2</span>[[<span class="dv">4</span>]][[<span class="dv">2</span>]]
my_list_<span class="dv">2</span>[[<span class="dv">4</span>]][[<span class="st">&quot;company&quot;</span>]]</code></pre></div>
</div>
</div>
<div id="--" class="section level3">
<h3><span class="header-section-number">5.6.4</span> Проверить класс объекта</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(users)
<span class="kw">class</span>(age)
<span class="kw">class</span>(my_list)</code></pre></div>
</div>
</div>
<p style="text-align: center;">
<a href="5-5-rstudio.html"><button class="btn btn-default">Previous</button></a>
<a href="5-7-r.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
